Generating protobuf code...
ç”ŸæˆgRPC Goä»£ç ...
gRPCä»£ç ç”Ÿæˆå®Œæˆï¼
Building applications...
Starting controller...
2025/08/16 02:53:45 Xbox Controller 0.1.0 å¯åŠ¨ä¸­...
2025/08/16 02:53:45 æ•°æ®åº“è¿æ¥æˆåŠŸ
2025/08/16 02:53:45 èŠ‚ç‚¹ä¸ŠæŠ¥æœåŠ¡å·²å¯åŠ¨ï¼Œé—´éš”: 60ç§’
2025/08/16 02:53:45 ControlleræœåŠ¡å·²å¯åŠ¨
2025/08/16 02:53:45 gRPCåœ°å€: 0.0.0.0:9090
2025/08/16 02:53:45 HTTPåœ°å€: 0.0.0.0:9000
2025/08/16 02:53:45 gRPCæœåŠ¡å™¨å¯åŠ¨å¤±è´¥: åˆ›å»ºgRPCç›‘å¬å™¨å¤±è´¥: listen tcp 0.0.0.0:9090: bind: address already in use
make: *** [Makefile:39: run-controller] Error 1
[GIN] 2025/08/16 - 02:53:55 | 200 |        68.2Âµs |       127.0.0.1 | GET      "/health"
[GIN] 2025/08/16 - 02:54:06 | 500 |  3.869413796s |       127.0.0.1 | POST     "/api/v1/agents/deploy"
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T02:54:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T02:54:37-04:00"}
[GIN] 2025/08/16 - 02:55:14 | 500 |  6.825003658s |       127.0.0.1 | POST     "/api/v1/agents/deploy"
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T02:55:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T02:55:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T02:56:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T02:56:37-04:00"}
2025/08/16 02:56:53 Agentæ³¨å†Œè¯·æ±‚: ID=debian-1755327413, Hostname=debian, IP=195.78.55.64

2025/08/16 02:56:53 [31;1m/root/wl/code/xbox/internal/controller/repository/agent_repo.go:54 [35;1mrecord not found
[0m[33m[1.061ms] [34;1m[rows:0][0m SELECT * FROM `agents` WHERE id = 'debian-1755327413' AND `agents`.`deleted_at` IS NULL ORDER BY `agents`.`id` LIMIT 1
2025/08/16 02:56:53 Agentæ³¨å†Œå“åº”: Success=true, Message=Agentæ³¨å†ŒæˆåŠŸ
[GIN] 2025/08/16 - 02:57:19 | 200 |     108.101Âµs |       127.0.0.1 | GET      "/health"
[GIN] 2025/08/16 - 02:57:20 | 200 |     3.11203ms |       127.0.0.1 | GET      "/api/v1/agents"
2025/08/16 02:57:23 æ”¶åˆ°å¿ƒè·³: AgentID=debian-1755327413, Status=online
[GIN] 2025/08/16 - 02:57:23 | 200 |    2.642526ms |       127.0.0.1 | GET      "/api/v1/agents"
[GIN] 2025/08/16 - 02:57:23 | 200 |    1.296112ms |       127.0.0.1 | GET      "/api/v1/agents/debian-1755327413"
[GIN] 2025/08/16 - 02:57:26 | 500 |  2.238787197s |       127.0.0.1 | POST     "/api/v1/agents/deploy"
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T02:57:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %væœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€: 400","timestamp":"2025-08-16T02:57:37-04:00"}
2025/08/16 02:57:53 æ”¶åˆ°å¿ƒè·³: AgentID=debian-1755327413, Status=online
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T02:58:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T02:58:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T02:59:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T02:59:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T03:00:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T03:00:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T03:01:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T03:01:37-04:00"}
[GIN] 2025/08/16 - 03:01:49 | 200 |     109.101Âµs |       127.0.0.1 | GET      "/health"
[GIN] 2025/08/16 - 03:01:49 | 200 |    1.747417ms |       127.0.0.1 | GET      "/api/v1/agents"
[GIN] 2025/08/16 - 03:01:52 | 200 |    1.517215ms |       127.0.0.1 | GET      "/api/v1/agents"
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T03:02:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T03:02:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:131","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"info","message":"å¼€å§‹æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥","timestamp":"2025-08-16T03:03:37-04:00"}
{"file":"/root/wl/code/xbox/internal/controller/service/report_service.go:155","function":"github.com/xbox/sing-box-manager/internal/controller/service.(*NodeReportService).reportNodeInfo","level":"error","message":"å‘é€èŠ‚ç‚¹ä¿¡æ¯ä¸ŠæŠ¥å¤±è´¥: %vå‘é€HTTPè¯·æ±‚å¤±è´¥: Post \"http://localhost:8080/api/ip-pool/report\": dial tcp [::1]:8080: connect: connection refused","timestamp":"2025-08-16T03:03:37-04:00"}
2025/08/16 03:04:23 æ­£åœ¨å…³é—­æœåŠ¡...
2025/08/16 03:04:23 æ­£åœ¨åœæ­¢gRPCæœåŠ¡å™¨...
2025/08/16 03:04:23 gRPCæœåŠ¡å™¨å·²åœæ­¢
2025/08/16 03:04:23 æ­£åœ¨åœæ­¢HTTPæœåŠ¡å™¨...
2025/08/16 03:04:23 HTTPæœåŠ¡å™¨å¯åŠ¨å¤±è´¥: http: Server closed
make: *** [Makefile:39: run-controller] Error 1
